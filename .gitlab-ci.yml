image: maven:3.5.4-jdk-8

stages:
 - build
 - test
 - analyse
 - deploy

unit_test:
 stage: test
 script:
 - mvn clean test
 rules:
 - if: '$CI_COMMIT_BRANCH == "main"

build:
	stage: build
	script:
	- mvn compile

sonar:
 stage: analyse
 script:
 - mvn verify sonar:sonar -Dsonar.qualitygate.wait=true